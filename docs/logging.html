<!DOCTYPE html>  <html> <head>   <title>logging.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="frontend.html">                 frontend.coffee               </a>                                           <a class="source" href="node.html">                 node.coffee               </a>                                           <a class="source" href="untar.html">                 untar.coffee               </a>                                           <a class="source" href="util.html">                 util.coffee               </a>                                           <a class="source" href="ClassFile.html">                 ClassFile.coffee               </a>                                           <a class="source" href="ConstantPool.html">                 ConstantPool.coffee               </a>                                           <a class="source" href="attributes.html">                 attributes.coffee               </a>                                           <a class="source" href="disassembler.html">                 disassembler.coffee               </a>                                           <a class="source" href="exceptions.html">                 exceptions.coffee               </a>                                           <a class="source" href="java_object.html">                 java_object.coffee               </a>                                           <a class="source" href="jvm.html">                 jvm.coffee               </a>                                           <a class="source" href="logging.html">                 logging.coffee               </a>                                           <a class="source" href="methods.html">                 methods.coffee               </a>                                           <a class="source" href="natives.html">                 natives.coffee               </a>                                           <a class="source" href="opcodes.html">                 opcodes.coffee               </a>                                           <a class="source" href="runtime.html">                 runtime.coffee               </a>                                           <a class="source" href="testing.html">                 testing.coffee               </a>                                           <a class="source" href="types.html">                 types.coffee               </a>                                           <a class="source" href="util.html">                 util.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               logging.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">gLong = </span><span class="nx">require</span> <span class="s1">&#39;../vendor/gLong.js&#39;</span>

<span class="s2">&quot;use strict&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>things assigned to root will be available outside this module</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">root = </span><span class="nx">exports</span> <span class="o">?</span> <span class="nb">window</span><span class="p">.</span><span class="nx">logging</span> <span class="o">?=</span> <span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>used for debugging the stack and local variables</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">root.debug_vars = </span><span class="nf">(arr) -&gt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">map</span> <span class="nf">(e)-&gt;</span>
  <span class="k">return</span> <span class="s1">&#39;!&#39;</span> <span class="k">if</span> <span class="nx">e</span> <span class="o">is</span> <span class="kc">null</span>
  <span class="k">return</span> <span class="s1">&#39;undef&#39;</span> <span class="k">if</span> <span class="nx">e</span> <span class="o">is</span> <span class="kc">undefined</span>
  <span class="k">return</span> <span class="s2">&quot;*#{e.ref}&quot;</span> <span class="k">if</span> <span class="nx">e</span><span class="p">.</span><span class="nx">ref</span><span class="o">?</span>
  <span class="k">return</span> <span class="s2">&quot;#{e}L&quot;</span> <span class="k">if</span> <span class="nx">e</span> <span class="k">instanceof</span> <span class="nx">gLong</span>
  <span class="nx">e</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>log levels</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">root.VTRACE = </span><span class="mi">10</span>
<span class="nv">root.TRACE = </span><span class="mi">9</span>
<span class="nv">root.DEBUG = </span><span class="mi">5</span>
<span class="nv">root.ERROR = </span><span class="mi">1</span>
<span class="nx">root</span><span class="p">.</span><span class="nx">log_level</span> <span class="o">?=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">ERROR</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>IE Compatibility</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">unless</span> <span class="nx">console</span><span class="o">?</span> <span class="o">or</span> <span class="nb">window</span><span class="o">?</span><span class="p">.</span><span class="nx">console</span>
  <span class="nb">window</span><span class="p">.</span><span class="nv">console = </span><span class="p">{</span>
    <span class="nv">log: </span><span class="o">-&gt;</span> <span class="c1"># Stub</span>
    <span class="nv">error: </span><span class="nf">(msgs...) -&gt;</span>
      <span class="k">throw</span> <span class="nx">msgs</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="c1"># Better than silently failing.</span>
    <span class="nv">profile: </span><span class="o">-&gt;</span> <span class="c1"># Stub</span>
    <span class="nv">profileEnd: </span><span class="o">-&gt;</span> <span class="c1"># Stub</span>
  <span class="p">}</span>

<span class="nv">root.log = </span><span class="nf">(level, msgs...) -&gt;</span>
  <span class="k">if</span> <span class="nx">level</span> <span class="o">&lt;=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">log_level</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>This used to be a CoffeeScript '...' invocation, which translated into
console.apply(console, msgs).
This does not work in IE, as some functions defined off of windows
do not support .apply. Thus, we work around this by using join to
construct a giant string, which works fine.
http://stackoverflow.com/questions/6873896/javascript-call-and-apply-in-internet-explorer-8-and-7-for-window-print/6875494#6875494</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">console</span><span class="p">[</span><span class="k">if</span> <span class="nx">level</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span> <span class="s1">&#39;error&#39;</span> <span class="k">else</span> <span class="s1">&#39;log&#39;</span><span class="p">](</span><span class="nx">msgs</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>

<span class="nv">root.vtrace = </span><span class="nf">(msgs...) -&gt;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">log</span> <span class="nx">root</span><span class="p">.</span><span class="nx">VTRACE</span><span class="p">,</span> <span class="nx">msgs</span><span class="p">...</span>
<span class="nv">root.trace = </span><span class="nf">(msgs...) -&gt;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">log</span> <span class="nx">root</span><span class="p">.</span><span class="nx">TRACE</span><span class="p">,</span> <span class="nx">msgs</span><span class="p">...</span>
<span class="nv">root.debug = </span><span class="nf">(msgs...) -&gt;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">log</span> <span class="nx">root</span><span class="p">.</span><span class="nx">DEBUG</span><span class="p">,</span> <span class="nx">msgs</span><span class="p">...</span>
<span class="nv">root.error = </span><span class="nf">(msgs...) -&gt;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">log</span> <span class="nx">root</span><span class="p">.</span><span class="nx">ERROR</span><span class="p">,</span> <span class="nx">msgs</span><span class="p">...</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 
<!DOCTYPE html>

<html>
<head>
  <title>logging.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="frontend.html">
                frontend.coffee
              </a>
            
              
              <a class="source" href="node.html">
                node.coffee
              </a>
            
              
              <a class="source" href="untar.html">
                untar.coffee
              </a>
            
              
              <a class="source" href="util.html">
                util.coffee
              </a>
            
              
              <a class="source" href="ClassData.html">
                ClassData.coffee
              </a>
            
              
              <a class="source" href="ClassLoader.html">
                ClassLoader.coffee
              </a>
            
              
              <a class="source" href="ConstantPool.html">
                ConstantPool.coffee
              </a>
            
              
              <a class="source" href="attributes.html">
                attributes.coffee
              </a>
            
              
              <a class="source" href="disassembler.html">
                disassembler.coffee
              </a>
            
              
              <a class="source" href="exceptions.html">
                exceptions.coffee
              </a>
            
              
              <a class="source" href="java_object.html">
                java_object.coffee
              </a>
            
              
              <a class="source" href="jvm.html">
                jvm.coffee
              </a>
            
              
              <a class="source" href="logging.html">
                logging.coffee
              </a>
            
              
              <a class="source" href="methods.html">
                methods.coffee
              </a>
            
              
              <a class="source" href="natives.html">
                natives.coffee
              </a>
            
              
              <a class="source" href="opcodes.html">
                opcodes.coffee
              </a>
            
              
              <a class="source" href="runtime.html">
                runtime.coffee
              </a>
            
              
              <a class="source" href="testing.html">
                testing.coffee
              </a>
            
              
              <a class="source" href="util.html">
                util.coffee
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>logging.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>
gLong = require <span class="string">'../vendor/gLong.js'</span>

<span class="string">"use strict"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>things assigned to root will be available outside this module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>root = exports ? window.logging ?= {}</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>used for debugging the stack and local variables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>root.<span class="function"><span class="title">debug_vars</span></span> = (arr) -&gt; arr.map (e)-&gt;
  <span class="keyword">return</span> <span class="string">'!'</span> <span class="keyword">if</span> e <span class="keyword">is</span> <span class="literal">null</span>
  <span class="keyword">return</span> <span class="string">'undef'</span> <span class="keyword">if</span> e <span class="keyword">is</span> <span class="literal">undefined</span>
  <span class="keyword">return</span> <span class="string">"*<span class="subst">#{e.ref}</span>"</span> <span class="keyword">if</span> e.ref?
  <span class="keyword">return</span> <span class="string">"<span class="subst">#{e}</span>L"</span> <span class="keyword">if</span> e <span class="keyword">instanceof</span> gLong
  e</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>log levels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>root.VTRACE = <span class="number">10</span>
root.TRACE = <span class="number">9</span>
root.DEBUG = <span class="number">5</span>
root.ERROR = <span class="number">1</span>
root.log_level ?= root.ERROR</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>IE Compatibility</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">unless</span> console? <span class="keyword">or</span> window?.console
  window.console = {
    log: -&gt; <span class="comment"># Stub</span>
    error: (msgs...) -&gt;
      <span class="keyword">throw</span> msgs.join(<span class="string">' '</span>) + <span class="string">'\n'</span> <span class="comment"># Better than silently failing.</span>
    profile: -&gt; <span class="comment"># Stub</span>
    profileEnd: -&gt; <span class="comment"># Stub</span>
  }

root.<span class="function"><span class="title">log</span></span> = (level, msgs...) -&gt;
  <span class="keyword">if</span> level &lt;= root.log_level</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>This used to be a CoffeeScript &#39;...&#39; invocation, which translated into
console.apply(console, msgs).
This does not work in IE, as some functions defined off of windows
do not support .apply. Thus, we work around this by using join to
construct a giant string, which works fine.
<a href="http://stackoverflow.com/questions/6873896/javascript-call-and-apply-in-internet-explorer-8-and-7-for-window-print/6875494#6875494">http://stackoverflow.com/questions/6873896/javascript-call-and-apply-in-internet-explorer-8-and-7-for-window-print/6875494#6875494</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    console[<span class="keyword">if</span> level == <span class="number">1</span> <span class="keyword">then</span> <span class="string">'error'</span> <span class="keyword">else</span> <span class="string">'log'</span>](msgs.join(<span class="string">' '</span>))

root.<span class="function"><span class="title">vtrace</span></span> = (msgs...) -&gt; root.log root.VTRACE, msgs...
root.<span class="function"><span class="title">trace</span></span> = (msgs...) -&gt; root.log root.TRACE, msgs...
root.<span class="function"><span class="title">debug</span></span> = (msgs...) -&gt; root.log root.DEBUG, msgs...
root.<span class="function"><span class="title">error</span></span> = (msgs...) -&gt; root.log root.ERROR, msgs...</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
